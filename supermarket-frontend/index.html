<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Supermarket Admin</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet" />
  <link rel="stylesheet" href="/styles/styles.css">
</head>

<body class="bg-light">

  <header>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
        <span class="navbar-brand fw-bold">Supermarket Admin</span>

        <div class="ms-auto">
          <!-- Login button -->
          <button class="btn btn-outline-light btn-sm" data-bs-toggle="modal" data-bs-target="#loginModal">
            Login
          </button>
        </div>
      </div>
    </nav>
  </header>

  <main class="container my-4">

    <div class="row g-4">
      <!-- Branch Card -->
      <div class="col-md-6">
        <div class="card h-100">
          <div class="card-header fw-bold">Branch</div>

          <div class="card-body d-flex gap-2">
            <select id="branchSelect" class="form-select"></select>

            <button class="btn btn-secondary action-btn" id="editBranchBtn">
              <i class="bi bi-pencil"></i>
            </button>
          </div>

          <div class="card-body pt-0">
            <button class="btn btn-primary w-100" id="createSaleBtn">
              <i class="bi bi-cart-plus"></i> Create Sale
            </button>
          </div>
        </div>
      </div>


      <!-- Product Card -->
      <div class="col-md-6">
        <div class="card">
          <div class="card-header fw-bold">Product</div>
          <div class="card-body d-flex flex-column gap-2">
            <div class="d-flex gap-2">
              <select id="productSelect" class="form-select"></select>

              <button class="btn btn-secondary action-btn" id="editProductBtn">
                <i class="bi bi-pencil"></i>
              </button>

            </div>
          </div>

          <div class="card-body pt-0">
            <button class="btn btn-primary w-100" id="addProductToSaleBtn" disabled>
              Add to Sale
            </button>
          </div>
        </div>
      </div>

      <!-- Sale Card -->
      <div class="col-md-12">
        <div class="card">
          <div class="card-header fw-bold d-flex justify-content-between align-items-center">
            <span>Sale</span>
            <span class="badge bg-secondary" id="saleStatusBadge">
              NO SALE
            </span>
          </div>
          <div class="card-body">
            <table class="table table-bordered align-middle" id="saleTable">
              <thead class="table-light">
                <tr>
                  <th>Product ID</th>
                  <th>Name</th>
                  <th class="text-center">Quantity</th>
                  <th>Unit Price</th>
                  <th>Subtotal</th>
                  <th></th>
                </tr>
              </thead>
              <tbody></tbody>
              <tfoot>
                <tr class="fw-bold">
                  <td colspan="4" class="text-end">Total</td>
                  <td id="totalCell">$0.00</td>
                  <td></td>
                </tr>
              </tfoot>
            </table>
          </div>

          <!-- Finish / cancel buttons -->
          <div class="card-body d-flex justify-content-end gap-2">
            <button class="btn btn-success" id="finishSaleBtn" disabled>
              <i class="bi bi-check-circle"></i> Finish Sale
            </button>

            <button class="btn btn-danger" id="cancelSaleBtn" disabled>
              <i class="bi bi-x-circle"></i> Cancel Sale
            </button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Branch Modal -->
  <div class="modal fade" id="branchModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
      <div class="modal-content">

        <!-- Header -->
        <div class="modal-header">
          <h5 class="modal-title fw-bold">Manage Branches</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>

        <!-- Body -->
        <div class="modal-body">

          <!-- Create Branch -->
          <div class="d-flex gap-2 mb-3">
            <input type="text" class="form-control" id="newBranchAddress" placeholder="New branch address" />

            <button class="btn btn-success" id="createBranchModalBtn">
              <i class="bi bi-plus-lg"></i>
            </button>
          </div>

          <!-- Branches Table -->
          <div class="table-responsive">
            <table class="table table-sm table-hover align-middle">
              <thead class="table-light">
                <tr>
                  <th>ID</th>
                  <th>Address</th>
                  <th class="text-end">Actions</th>
                </tr>
              </thead>
              <tbody id="branchTableBody">
                <!-- rows rendered by JS -->
              </tbody>
            </table>
          </div>

          <!-- Pagination (future-ready) -->
          <div class="d-flex justify-content-end">
            <nav>
              <ul class="pagination pagination-sm mb-0">
                <!-- optional later -->
              </ul>
            </nav>
          </div>

        </div>

        <!-- Footer -->
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">
            Close
          </button>
        </div>

      </div>
    </div>
  </div>

  <!-- Product Modal -->
  <div class="modal fade" id="productModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
      <div class="modal-content">

        <!-- Header -->
        <div class="modal-header">
          <h5 class="modal-title fw-bold">Manage Products</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>

        <!-- Body -->
        <div class="modal-body">

          <!-- Create Product -->
          <div class="d-flex gap-2 mb-3">
            <input type="text" class="form-control" id="newProductName" placeholder="Product name" />

            <input type="number" step="0.01" class="form-control" id="newProductPrice" placeholder="Price" />

            <button class="btn btn-success" id="createProductModalBtn">
              <i class="bi bi-plus-lg"></i>
            </button>
          </div>

          <!-- Products Table -->
          <div class="table-responsive">
            <table class="table table-sm table-hover align-middle">
              <thead class="table-light">
                <tr>
                  <th>ID</th>
                  <th>Name</th>
                  <th class="text-end">Price</th>
                  <th class="text-end">Actions</th>
                </tr>
              </thead>
              <tbody id="productTableBody">
                <!-- rows rendered later -->
              </tbody>
            </table>
          </div>

        </div>

        <!-- Footer -->
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">
            Close
          </button>
        </div>

      </div>
    </div>
  </div>

  <!-- Login Modal -->
  <div class="modal fade" id="loginModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">

        <div class="modal-header">
          <h5 class="modal-title">Login</h5>
          <button class="btn-close" data-bs-dismiss="modal"></button>
        </div>

        <div class="modal-body">
          <input type="email" class="form-control mb-2" placeholder="email@example.com" required />

          <input type="password" class="form-control" placeholder="Password" required />
        </div>

        <div class="modal-footer">
          <button class="btn btn-primary" disabled>
            Login
          </button>
        </div>

      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-dark text-light text-center border-top mt-4 fixed-bottom">
    <div class="container py-2 small d-flex justify-content-between">
      <span>Supermarket API Admin</span>
      <span>v1.0</span>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5/dist/js/bootstrap.bundle.min.js"></script>
  <script type="module" src="js/app.js"></script>
</body>

</html>